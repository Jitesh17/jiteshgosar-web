---
import Giscus from "../components/Giscus.astro";
import TocDrawer from "../components/TocDrawer.astro";

const { title, pubDate, headings = [] } = Astro.props;
const dateStr =
  pubDate instanceof Date ? pubDate.toISOString().slice(0, 10) : String(pubDate ?? "");
---
<div class="relative">
  <TocDrawer headings={headings} />

  <main class="mx-auto max-w-4xl px-4 py-10 sm:px-6">
    <article class="prose prose-neutral max-w-none dark:prose-invert">
      <header class="not-prose">
        <h1 class="text-4xl font-semibold tracking-tight text-neutral-900 dark:text-white sm:text-5xl">
          {title}
        </h1>
        {dateStr && (
          <p class="mt-3 text-sm text-neutral-600 dark:text-neutral-400">{dateStr}</p>
        )}
      </header>

      <div class="mt-8">
        <slot />
      </div>
    </article>

    <section class="mt-12">
      <Giscus />
    </section>
  </main>
</div>
